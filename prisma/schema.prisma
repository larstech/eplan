generator client {
  provider      = "prisma-client"
  output        = "../src/generated/prisma"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
}

model Employee {
  id         String     @id @default(uuid())
  firstName  String
  lastName   String
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @default(now()) @updatedAt
  freelancer Boolean    @default(false)
  calendar   Calendar[]
}

model Customer {
  id                String          @id @default(uuid())
  companyName       String
  travelTimeMinutes Int
  breakTimeMinutes  Int
  notes             String
  addressId         String          @unique
  contactId         String          @unique
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @default(now()) @updatedAt
  distanceInKm      Int             @default(0)
  address           Address         @relation(fields: [addressId], references: [id])
  contact           CustomerContact @relation(fields: [contactId], references: [id])
  job               Job[]
}

model Address {
  id          String    @id @default(uuid())
  country     String
  postalCode  String
  houseNumber String
  street      String
  city        String
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @default(now()) @updatedAt
  customer    Customer?
}

model CustomerContact {
  id          String    @id @default(uuid())
  firstName   String
  lastName    String
  phoneNumber String
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @default(now()) @updatedAt
  customer    Customer?
}

model Job {
  id          String     @id @default(uuid())
  orderId     Int        @unique
  title       String
  description String
  customerId  String
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @default(now()) @updatedAt
  calendar    Calendar[]
  customer    Customer   @relation(fields: [customerId], references: [id])
}

model Calendar {
  id         String   @id @default(uuid())
  jobId      String
  employeeId String
  date       DateTime
  endTime    DateTime
  startTime  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @default(now()) @updatedAt
  employee   Employee @relation(fields: [employeeId], references: [id])
  job        Job      @relation(fields: [jobId], references: [id])
}
